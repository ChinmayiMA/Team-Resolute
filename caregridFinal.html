<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CareGrid - Future of Healthcare</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Playfair+Display:wght@500;600;700;800&display=swap');

        :root {
            --gradient-primary: linear-gradient(135deg, #6366f1 0%, #a855f7 50%, #ec4899 100%);
            --gradient-hover: linear-gradient(135deg, #4f46e5 0%, #9333ea 50%, #db2777 100%);
            --gradient-gold: linear-gradient(135deg, #fbbf24 0%, #d97706 100%);
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.8);
            --shadow-glow: 0 20px 40px -10px rgba(168, 85, 247, 0.25);
        }

        body { 
            font-family: 'Outfit', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        h1, h2, h3, .brand-font {
            font-family: 'Playfair Display', serif;
        }

        /* Animated Background Blobs */
        .blob-cont {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
        }
        .blob {
            position: absolute;
            filter: blur(80px);
            opacity: 0.6;
            animation: float 20s infinite alternate;
        }
        .blob-1 {
            top: -10%; left: -10%; width: 50vw; height: 50vw;
            background: #c084fc; /* Purple */
            animation-delay: 0s;
        }
        .blob-2 {
            bottom: -10%; right: -10%; width: 60vw; height: 60vw;
            background: #818cf8; /* Indigo */
            animation-delay: -5s;
        }
        .blob-3 {
            top: 40%; left: 40%; width: 40vw; height: 40vw;
            background: #f472b6; /* Pink */
            opacity: 0.4;
            animation-delay: -10s;
        }

        @keyframes float {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(20px, 40px) scale(1.1); }
        }

        /* Premium Glass Components */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow-glow);
        }

        .input-field {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.5);
            transition: all 0.3s ease;
        }
        .input-field:focus {
            background: #fff;
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.2);
            border-color: #a855f7;
        }

        .btn-primary {
            background-image: var(--gradient-primary);
            background-size: 200% auto;
            color: white;
            transition: all 0.4s ease;
            box-shadow: 0 10px 20px -5px rgba(99, 102, 241, 0.4);
        }
        .btn-primary:hover {
            background-position: right center;
            transform: translateY(-2px);
            box-shadow: 0 15px 25px -5px rgba(168, 85, 247, 0.5);
        }

        /* Text Gradients */
        .text-gradient {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Step Animations */
        .step-content { 
            display: none; 
            opacity: 0;
            transform: scale(0.98) translateY(10px);
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .step-content.active { 
            display: block; 
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        /* Image Cards */
        .image-card {
            position: relative;
            overflow: hidden;
            transition: all 0.5s ease;
        }
        .image-card img {
            transition: transform 0.7s ease;
        }
        .image-card:hover img {
            transform: scale(1.1);
        }
        .image-card::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 60%);
            opacity: 0.8;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Mobile Optimisation */
        @media (max-width: 640px) {
            h2 { font-size: 1.75rem !important; }
        }
        
        /* Loader */
        .loader-overlay {
            position: fixed; inset: 0; background: rgba(255,255,255,0.9);
            backdrop-filter: blur(10px); z-index: 100;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.3s;
        }
        .loader-overlay.show { opacity: 1; pointer-events: all; }
    </style>
</head>
<body>

    <!-- Dynamic Background -->
    <div class="blob-cont">
        <div class="blob blob-1 rounded-full"></div>
        <div class="blob blob-2 rounded-full"></div>
        <div class="blob blob-3 rounded-full"></div>
    </div>

    <!-- Global Loader -->
    <div id="global-loader" class="loader-overlay">
        <div class="text-center">
            <div class="relative w-20 h-20 mx-auto mb-4">
                <div class="absolute inset-0 border-4 border-indigo-200 rounded-full animate-spin"></div>
                <div class="absolute inset-0 border-4 border-transparent border-t-indigo-600 rounded-full animate-spin"></div>
                <i data-lucide="activity" class="absolute inset-0 m-auto w-8 h-8 text-indigo-600 animate-pulse"></i>
            </div>
            <h3 class="text-xl font-bold text-gradient tracking-wide">CareGrid AI</h3>
            <p class="text-slate-400 text-sm mt-1">Optimising network...</p>
        </div>
    </div>

    <!-- Header -->
    <header class="sticky top-0 z-40 glass-panel border-b-0 border-b-white/20">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-20 flex items-center justify-between">
            <div class="flex items-center gap-3 cursor-pointer group" onclick="location.reload()">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white shadow-lg group-hover:rotate-12 transition-transform">
                    <i data-lucide="grid" class="w-6 h-6"></i>
                </div>
                <span class="text-2xl font-bold brand-font text-slate-800">CareGrid<span class="text-indigo-500">.</span></span>
            </div>
            <div class="flex items-center gap-4">
                <div class="hidden md:flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/50 border border-white shadow-sm">
                    <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                    <span class="text-xs font-bold text-slate-600 tracking-wider uppercase">Live Network</span>
                </div>
                <button class="w-10 h-10 rounded-full bg-white flex items-center justify-center text-slate-400 hover:text-indigo-600 shadow-sm hover:shadow-md transition-all relative">
                    <i data-lucide="bell" class="w-5 h-5"></i>
                    <span class="absolute top-2 right-2 w-2.5 h-2.5 bg-pink-500 rounded-full border-2 border-white"></span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container max-w-4xl mx-auto px-4 py-8 sm:py-12 relative z-10 min-h-[80vh]">
        
        <!-- Progress System -->
        <div class="mb-10 relative">
            <div class="flex justify-between text-xs font-bold text-slate-400 uppercase tracking-widest mb-2 px-1">
                <span id="step-label" class="text-indigo-600">Start</span>
                <span>Complete</span>
            </div>
            <div class="h-2 bg-slate-200/60 rounded-full overflow-hidden backdrop-blur-sm">
                <div id="progress-bar" class="h-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 w-[20%] transition-all duration-700 shadow-[0_0_15px_rgba(168,85,247,0.6)]"></div>
            </div>
        </div>

        <!-- Step 1: Visual Welcome -->
        <div id="step-1" class="step-content active">
            <div class="glass-panel rounded-[2rem] p-1 overflow-hidden shadow-2xl">
                <div class="bg-white/50 rounded-[1.9rem] p-6 sm:p-10 relative overflow-hidden">
                    
                    <!-- Hero Gallery (Redesigned) -->
                    <div class="grid grid-cols-3 gap-4 mb-8 h-40 sm:h-56">
                        <!-- Image 1: Hospital Architecture -->
                        <div class="rounded-2xl overflow-hidden relative group shadow-lg h-full">
                            <img src="https://images.unsplash.com/photo-1584515933487-779824d29309?auto=format&fit=crop&q=80&w=800" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" alt="Modern Indian Healthcare Facility">
                            <div class="absolute inset-0 bg-indigo-900/10 group-hover:bg-transparent transition-colors duration-500"></div>
                        </div>
                        
                        <!-- Image 2: Veterinary Care -->
                        <div class="rounded-2xl overflow-hidden relative group shadow-lg h-full">
                            <img src="https://images.unsplash.com/photo-1606425271394-c3ca9aa1fc06?auto=format&fit=crop&q=80&w=800" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" alt="Compassionate Veterinary Care">
                            <div class="absolute inset-0 bg-emerald-900/10 group-hover:bg-transparent transition-colors duration-500"></div>
                        </div>

                        <!-- Image 3: Medical Network -->
                        <div class="rounded-2xl overflow-hidden relative group shadow-lg h-full">
                            <img src="https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?auto=format&fit=crop&q=80&w=800" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" alt="Digital Health Network">
                            <div class="absolute inset-0 bg-purple-900/10 group-hover:bg-transparent transition-colors duration-500"></div>
                        </div>
                    </div>

                    <div class="text-center max-w-lg mx-auto relative z-10">
                        <h2 class="text-4xl sm:text-5xl font-bold text-slate-900 mb-4 leading-tight">Your Health,<br><span class="text-gradient">Reimagined.</span></h2>
                        <p class="text-slate-600 mb-8 text-lg">Connect with the India's finest medical network. Verified specialists, budget friendly care, and nearest emergency support.</p>
                        
                        <div class="relative group">
                            <input type="text" id="user-name" class="input-field w-full px-6 py-5 rounded-2xl text-lg text-center font-medium placeholder:text-slate-400 text-slate-800 outline-none" placeholder="Enter your full name to begin">
                            <button onclick="nextStep(1)" class="absolute right-2 top-2 bottom-2 aspect-square bg-slate-900 hover:bg-indigo-600 text-white rounded-xl transition-colors flex items-center justify-center shadow-lg">
                                <i data-lucide="arrow-right" class="w-6 h-6"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Decor -->
                    <div class="absolute -bottom-20 -left-20 w-64 h-64 bg-indigo-200 rounded-full filter blur-[80px] opacity-50 pointer-events-none"></div>
                    <div class="absolute -top-20 -right-20 w-64 h-64 bg-pink-200 rounded-full filter blur-[80px] opacity-50 pointer-events-none"></div>
                </div>
            </div>
        </div>

        <!-- Step 2: Immersive Categories -->
        <div id="step-2" class="step-content">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-slate-900">Who needs attention?</h2>
                <p class="text-slate-500 mt-2">Choose the specialized care path.</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Human Card -->
                <button onclick="setEmergencyType('human')" class="image-card h-80 rounded-[2rem] shadow-2xl group text-left w-full">
                    <img src="https://images.unsplash.com/photo-1629909613654-28e377c37b09?auto=format&fit=crop&q=80&w=800" class="absolute inset-0 w-full h-full object-cover" alt="Human Care">
                    <div class="absolute inset-0 bg-gradient-to-t from-indigo-900/90 via-transparent to-transparent opacity-90"></div>
                    <div class="absolute bottom-0 left-0 p-8 w-full z-10">
                        <div class="w-12 h-12 rounded-2xl bg-white/20 backdrop-blur-md flex items-center justify-center mb-4 border border-white/30 group-hover:bg-indigo-500 group-hover:text-white transition-colors text-white">
                            <i data-lucide="user" class="w-6 h-6"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-white mb-1">Medical Care</h3>
                        <p class="text-indigo-200 font-medium">Hospitals & Specialists</p>
                        <div class="mt-4 flex items-center text-white text-sm font-bold opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-500">
                            Proceed <i data-lucide="arrow-right" class="w-4 h-4 ml-2"></i>
                        </div>
                    </div>
                </button>

                <!-- Animal Card -->
                <button onclick="setEmergencyType('animal')" class="image-card h-80 rounded-[2rem] shadow-2xl group text-left w-full">
                    <img src="https://images.unsplash.com/photo-1623366302587-b38b1ddaefd9?auto=format&fit=crop&q=80&w=800" class="absolute inset-0 w-full h-full object-cover" alt="Vet Care">
                    <div class="absolute inset-0 bg-gradient-to-t from-emerald-900/90 via-transparent to-transparent opacity-90"></div>
                    <div class="absolute bottom-0 left-0 p-8 w-full z-10">
                        <div class="w-12 h-12 rounded-2xl bg-white/20 backdrop-blur-md flex items-center justify-center mb-4 border border-white/30 group-hover:bg-emerald-500 group-hover:text-white transition-colors text-white">
                            <i data-lucide="paw-print" class="w-6 h-6"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-white mb-1">Veterinary</h3>
                        <p class="text-emerald-200 font-medium">Pets & Exotic Animals</p>
                        <div class="mt-4 flex items-center text-white text-sm font-bold opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-500">
                            Proceed <i data-lucide="arrow-right" class="w-4 h-4 ml-2"></i>
                        </div>
                    </div>
                </button>
            </div>
            <div class="mt-8 text-center">
                <button onclick="prevStep(2)" class="text-slate-400 hover:text-indigo-600 font-bold text-sm flex items-center justify-center mx-auto transition-colors">
                    <i data-lucide="arrow-left" class="w-4 h-4 mr-2"></i> Go Back
                </button>
            </div>
        </div>

        <!-- Step 3: Location Banner -->
        <div id="step-3" class="step-content">
            <!-- Map Banner -->
            <div class="h-40 w-full rounded-3xl overflow-hidden relative mb-8 shadow-lg">
                <img src="https://images.unsplash.com/photo-1569336415962-a4bd9f69cd83?auto=format&fit=crop&q=80&w=1200" class="w-full h-full object-cover opacity-80" alt="Map">
                <div class="absolute inset-0 bg-gradient-to-r from-indigo-900/80 to-transparent flex items-center px-8">
                    <div class="text-white">
                        <h2 class="text-3xl font-bold">Location</h2>
                        <p class="text-indigo-200">Find nearby verified centers.</p>
                    </div>
                </div>
            </div>

            <div class="glass-panel rounded-[2rem] p-8 relative">
                <button onclick="detectLocation()" class="w-full py-5 rounded-2xl bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-100 text-indigo-700 font-bold hover:shadow-lg transition-all flex justify-center items-center group mb-6">
                    <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center mr-3 shadow-md text-indigo-600 group-hover:scale-110 transition-transform">
                        <i data-lucide="crosshair" class="w-5 h-5"></i>
                    </div>
                    Auto-Detect Location
                </button>

                <div class="relative flex py-2 items-center mb-6">
                    <div class="flex-grow border-t border-slate-300"></div>
                    <span class="flex-shrink-0 mx-4 text-xs font-bold text-slate-400 uppercase tracking-widest">Manual Entry</span>
                    <div class="flex-grow border-t border-slate-300"></div>
                </div>

                <div class="space-y-4">
                    <div class="relative">
                        <input type="text" id="location-input" class="input-field w-full pl-14 pr-4 py-5 rounded-2xl text-lg font-medium text-slate-800 placeholder:text-slate-400 outline-none" placeholder="City or Pincode">
                        <i data-lucide="map-pin" class="absolute left-5 top-1/2 -translate-y-1/2 w-6 h-6 text-slate-400"></i>
                    </div>
                    <div class="flex gap-4 pt-2">
                        <button onclick="prevStep(3)" class="px-8 py-4 rounded-2xl border border-slate-300 text-slate-500 font-bold hover:bg-slate-50 transition-colors">Back</button>
                        <button onclick="nextStep(3)" class="flex-1 btn-primary py-4 rounded-2xl text-lg font-bold shadow-lg flex justify-center items-center">
                            Confirm <i data-lucide="check" class="w-5 h-5 ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 4: Colourful Form -->
        <div id="step-4" class="step-content">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-slate-900">Clinical Details</h2>
                <p class="text-slate-500 mt-1">Help us triage your needs.</p>
            </div>

            <div class="glass-panel rounded-[2rem] p-8 space-y-6">
                <!-- Human Select -->
                <div id="human-options" class="hidden">
                    <label class="block text-xs font-bold text-indigo-600 mb-2 uppercase tracking-wide ml-1">Department</label>
                    <div class="relative">
                        <select id="human-specialty" class="input-field block w-full pl-5 pr-10 py-5 text-lg rounded-2xl text-slate-700 outline-none appearance-none cursor-pointer font-medium">
                            <option value="general">General Medicine</option>
                            <option value="cardio">Cardiology</option>
                            <option value="ortho">Orthopaedics</option>
                            <option value="paediatrics">Paediatrics</option>
                            <option value="neuro">Neurology</option>
                            <option value="derma">Dermatology</option>
                            <option value="gastro">Gastroenterology</option>
                            <option value="psych">Psychiatry</option>
                            <option value="obgyn">Obstetrics & Gynaecology</option>
                            <option value="surgery">General Surgery</option>
                        </select>
                        <i data-lucide="chevron-down" class="absolute right-5 top-1/2 -translate-y-1/2 w-6 h-6 text-indigo-500 pointer-events-none"></i>
                    </div>
                </div>

                <!-- Animal Select -->
                <div id="animal-options" class="hidden space-y-6">
                    <div>
                        <label class="block text-xs font-bold text-emerald-600 mb-3 uppercase tracking-wide ml-1">Species</label>
                        <div class="grid grid-cols-3 gap-3">
                            <label class="cursor-pointer group">
                                <input type="radio" name="animal-radio" value="pet" checked class="peer sr-only" onchange="document.getElementById('animal-type').value = this.value">
                                <div class="p-4 rounded-2xl border-2 border-slate-100 bg-white text-center peer-checked:border-emerald-500 peer-checked:bg-emerald-50 transition-all group-hover:-translate-y-1 shadow-sm">
                                    <div class="w-10 h-10 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center mx-auto mb-2">
                                        <i data-lucide="dog" class="w-5 h-5"></i>
                                    </div>
                                    <span class="text-sm font-bold text-slate-700">Pet</span>
                                </div>
                            </label>
                            <label class="cursor-pointer group">
                                <input type="radio" name="animal-radio" value="avian" class="peer sr-only" onchange="document.getElementById('animal-type').value = this.value">
                                <div class="p-4 rounded-2xl border-2 border-slate-100 bg-white text-center peer-checked:border-emerald-500 peer-checked:bg-emerald-50 transition-all group-hover:-translate-y-1 shadow-sm">
                                    <div class="w-10 h-10 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center mx-auto mb-2">
                                        <i data-lucide="feather" class="w-5 h-5"></i>
                                    </div>
                                    <span class="text-sm font-bold text-slate-700">Bird</span>
                                </div>
                            </label>
                            <label class="cursor-pointer group">
                                <input type="radio" name="animal-radio" value="wild" class="peer sr-only" onchange="document.getElementById('animal-type').value = this.value">
                                <div class="p-4 rounded-2xl border-2 border-slate-100 bg-white text-center peer-checked:border-emerald-500 peer-checked:bg-emerald-50 transition-all group-hover:-translate-y-1 shadow-sm">
                                    <div class="w-10 h-10 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center mx-auto mb-2">
                                        <i data-lucide="tree-pine" class="w-5 h-5"></i>
                                    </div>
                                    <span class="text-sm font-bold text-slate-700">Exotic</span>
                                </div>
                            </label>
                        </div>
                        <input type="hidden" id="animal-type" value="pet">
                    </div>
                    
                    <div>
                        <label class="block text-xs font-bold text-emerald-600 mb-2 uppercase tracking-wide ml-1">Specialty</label>
                        <div class="relative">
                            <select id="vet-specialty" class="input-field block w-full pl-5 pr-10 py-5 text-lg rounded-2xl text-slate-700 outline-none appearance-none cursor-pointer font-medium">
                                <option value="general">General Checkup</option>
                                <option value="internal">Internal Medicine</option>
                                <option value="surgery">Surgery & Trauma</option>
                                <option value="cardio">Cardiology</option>
                                <option value="derma">Dermatology</option>
                                <option value="oncology">Oncology</option>
                            </select>
                            <i data-lucide="chevron-down" class="absolute right-5 top-1/2 -translate-y-1/2 w-6 h-6 text-emerald-500 pointer-events-none"></i>
                        </div>
                    </div>
                </div>

                <div>
                    <label class="block text-xs font-bold text-slate-500 mb-2 uppercase tracking-wide ml-1">Symptoms</label>
                    <textarea id="symptoms" rows="3" class="input-field block w-full p-5 rounded-2xl text-lg text-slate-700 outline-none resize-none placeholder:text-slate-400" placeholder="Describe key symptoms..."></textarea>
                </div>
            </div>

            <div class="flex gap-4 pt-8">
                <button onclick="prevStep(4)" class="px-8 py-4 rounded-2xl bg-white text-slate-600 font-bold hover:bg-slate-50 transition-colors shadow-sm">Back</button>
                <button onclick="generateResults()" class="flex-1 btn-primary py-4 rounded-2xl text-lg font-bold shadow-lg flex justify-center items-center">
                    <i data-lucide="search" class="w-5 h-5 mr-2"></i> Find Facilities
                </button>
            </div>
        </div>

        <!-- Step 5: Premium Results -->
        <div id="step-5" class="step-content">
            <div class="flex justify-between items-end mb-8">
                <div>
                    <h2 class="text-3xl sm:text-4xl font-bold text-slate-900">Recommendations</h2>
                    <p class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-pink-600 font-bold mt-1" id="result-header-text">AI Curated Selection</p>
                </div>
                <div class="hidden sm:block">
                     <span class="bg-white/80 backdrop-blur px-4 py-2 rounded-full text-xs font-bold text-indigo-600 border border-indigo-100 shadow-sm flex items-center">
                         <i data-lucide="shield-check" class="w-4 h-4 mr-2"></i> Verified
                     </span>
                </div>
            </div>

            <div id="results-list" class="grid grid-cols-1 gap-6">
                <!-- Results injected via JS -->
            </div>

            <!-- Services Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-12 border-t border-slate-200/60 pt-10">
                <!-- Home Visit -->
                <div id="home-visit-card" class="glass-panel p-1 rounded-[2rem] group hover:scale-[1.02] transition-transform duration-300">
                    <div class="bg-gradient-to-br from-white to-purple-50 p-6 rounded-[1.9rem] h-full relative overflow-hidden">
                        <div class="relative z-10">
                            <div class="w-14 h-14 bg-purple-100 text-purple-600 rounded-2xl flex items-center justify-center mb-4 shadow-inner">
                                <i data-lucide="home" class="w-7 h-7"></i>
                            </div>
                            <h3 id="home-visit-title" class="text-xl font-bold text-slate-900 mb-1">Home Consultation</h3>
                            <p id="home-visit-desc" class="text-sm text-slate-500 mb-6">Premium house call service.</p>
                            <button onclick="bookHomeVisit()" class="w-full py-3 rounded-xl bg-purple-600 text-white font-bold hover:bg-purple-700 transition-colors shadow-lg shadow-purple-200">
                                Check Availability
                            </button>
                        </div>
                        <!-- Decor -->
                        <div class="absolute -right-10 -bottom-10 w-40 h-40 bg-purple-200 rounded-full blur-3xl opacity-50"></div>
                    </div>
                </div>

                <!-- Ambulance -->
                <div class="rounded-[2rem] p-1 bg-gradient-to-br from-orange-400 to-red-600 shadow-xl shadow-orange-200/50 group hover:scale-[1.02] transition-transform duration-300">
                    <div class="bg-transparent p-6 h-full relative overflow-hidden">
                        <div class="relative z-10 text-white">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-14 h-14 bg-white/20 backdrop-blur-md rounded-2xl flex items-center justify-center animate-pulse">
                                    <i data-lucide="siren" class="w-7 h-7"></i>
                                </div>
                                <span class="bg-white/20 px-3 py-1 rounded-lg text-xs font-bold uppercase tracking-widest">Emergency</span>
                            </div>
                            <h3 class="text-xl font-bold mb-1">Ambulance Service</h3>
                            <p class="text-orange-100 mb-6 text-sm">ALS/BLS Units • Avg 8 min arrival</p>
                            <button onclick="requestAmbulance()" class="w-full py-3 rounded-xl bg-white text-red-600 font-bold hover:bg-orange-50 transition-colors shadow-lg">
                                Call 108 Dispatch
                            </button>
                        </div>
                        <i data-lucide="ambulance" class="absolute -bottom-6 -right-6 w-48 h-48 text-white opacity-10 transform -rotate-12"></i>
                    </div>
                </div>
            </div>
            
            <div class="mt-16 pb-8 text-center">
                 <button onclick="location.reload()" class="inline-flex items-center text-slate-400 hover:text-indigo-600 font-bold text-sm transition-colors px-6 py-3 rounded-full hover:bg-white hover:shadow-sm">
                     <i data-lucide="rotate-ccw" class="w-4 h-4 mr-2"></i> Start New Search
                 </button>
            </div>
        </div>
    </main>

    <!-- Modals (Premium Style) -->
    <div id="modal-backdrop" class="fixed inset-0 bg-slate-900/60 backdrop-blur-md z-50 hidden opacity-0 transition-all duration-500"></div>

    <!-- Ambulance Modal -->
    <div id="ambulance-modal" class="fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-full max-w-md p-4 hidden opacity-0 transition-all duration-500 scale-90">
        <div class="bg-white rounded-[2.5rem] shadow-2xl overflow-hidden border border-white/50">
            <div class="bg-gradient-to-br from-red-600 to-orange-600 p-10 text-center relative overflow-hidden">
                <div class="w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-6 backdrop-blur-md border border-white/30 shadow-xl">
                    <i data-lucide="ambulance" class="w-10 h-10 text-white animate-pulse"></i>
                </div>
                <h3 class="text-3xl font-bold text-white brand-font">Dispatching</h3>
                <p class="text-orange-100 font-medium mt-1">Priority One Response</p>
                
                <!-- Radar Effect -->
                <div class="absolute inset-0 border-[20px] border-white/5 rounded-full animate-[ping_3s_linear_infinite]"></div>
            </div>
            <div class="p-8 bg-white">
                <div class="flex justify-between items-center mb-8 pb-6 border-b border-slate-100">
                    <div>
                        <p class="text-xs font-bold text-slate-400 uppercase tracking-wider">Target</p>
                        <p class="text-xl font-bold text-slate-800 mt-1" id="modal-city">Bengaluru</p>
                    </div>
                    <div class="text-right">
                        <p class="text-xs font-bold text-slate-400 uppercase tracking-wider">ETA</p>
                        <p class="text-xl font-bold text-emerald-500 font-mono mt-1">08:00</p>
                    </div>
                </div>
                <div class="space-y-4 mb-8">
                    <div class="flex items-center gap-4 p-4 bg-slate-50 rounded-2xl">
                        <span class="w-3 h-3 bg-emerald-500 rounded-full animate-pulse shadow-[0_0_10px_#10b981]"></span>
                        <span class="text-sm font-bold text-slate-600">Connecting to Control Room...</span>
                    </div>
                </div>
                <button onclick="closeModal('ambulance-modal')" class="w-full bg-slate-900 text-white py-5 rounded-2xl font-bold hover:bg-black transition-colors text-lg">Dismiss</button>
            </div>
        </div>
    </div>

    <!-- Home Visit Modal -->
    <div id="home-visit-modal" class="fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-full max-w-md p-4 hidden opacity-0 transition-all duration-500 scale-90">
        <div class="bg-white rounded-[2.5rem] shadow-2xl overflow-hidden p-10 text-center relative">
            <div class="w-20 h-20 bg-purple-50 rounded-3xl flex items-center justify-center mx-auto mb-6 text-purple-600 shadow-lg rotate-3">
                <i data-lucide="calendar-check" class="w-10 h-10"></i>
            </div>
            <h3 class="text-2xl font-bold text-slate-900 mb-2">Request Sent</h3>
            <p class="text-slate-500 mb-8 leading-relaxed">We've broadcasted your request to verified professionals in the area.</p>
            
            <div class="bg-slate-50 rounded-2xl p-6 mb-8 border border-slate-100">
                <div class="flex justify-between mb-3">
                    <span class="text-sm font-medium text-slate-500">Service Type</span>
                    <span class="text-sm font-bold text-slate-800">Home Visit</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-sm font-medium text-slate-500">Est. Charge</span>
                    <span class="text-lg font-bold text-purple-600">₹600 - ₹900</span>
                </div>
            </div>

            <button onclick="closeModal('home-visit-modal')" class="w-full bg-purple-600 text-white py-5 rounded-2xl font-bold hover:bg-purple-700 transition-colors text-lg shadow-xl shadow-purple-200">Acknowledge</button>
            
            <!-- Confetti Effect CSS only -->
            <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-purple-400 via-pink-500 to-indigo-500"></div>
        </div>
    </div>

    <script>
        // Logic & State
        const state = {
            name: '',
            type: '',
            location: '',
            animalType: '',
            specialty: '',
            symptoms: ''
        };

        lucide.createIcons();

        function nextStep(current) {
            if (current === 1) {
                const nameInput = document.getElementById('user-name').value;
                if (!nameInput.trim()) return shakeInput('user-name');
                state.name = nameInput;
            }
            if (current === 3) {
                const locInput = document.getElementById('location-input').value;
                if (!locInput.trim() && !state.location) return shakeInput('location-input');
                if (locInput) state.location = locInput;
            }

            const currentEl = document.getElementById(`step-${current}`);
            currentEl.style.opacity = '0';
            currentEl.style.transform = 'scale(0.95) translateY(-20px)';
            
            setTimeout(() => {
                currentEl.classList.remove('active');
                const next = current + 1;
                const nextEl = document.getElementById(`step-${next}`);
                nextEl.classList.add('active');
                
                // Reset styles
                currentEl.style.opacity = '';
                currentEl.style.transform = '';
                
                updateProgress(next);

                if (next === 4) {
                    if (state.type === 'human') {
                        document.getElementById('human-options').classList.remove('hidden');
                        document.getElementById('animal-options').classList.add('hidden');
                    } else {
                        document.getElementById('human-options').classList.add('hidden');
                        document.getElementById('animal-options').classList.remove('hidden');
                    }
                }
            }, 500);
        }

        function prevStep(current) {
            const currentEl = document.getElementById(`step-${current}`);
            currentEl.classList.remove('active');
            const prev = current - 1;
            document.getElementById(`step-${prev}`).classList.add('active');
            updateProgress(prev);
        }

        function updateProgress(step) {
            const percent = (step / 5) * 100;
            document.getElementById('progress-bar').style.width = `${percent}%`;
            
            const labels = ["Start", "Triage", "Locate", "Details", "Result"];
            document.getElementById('step-label').innerText = labels[step - 1] || "Start";
        }

        function setEmergencyType(type) {
            state.type = type;
            nextStep(2);
        }

        function shakeInput(id) {
            const el = document.getElementById(id);
            el.style.transform = 'translateX(10px)';
            el.style.borderColor = '#ef4444';
            setTimeout(() => {
                el.style.transform = 'translateX(-10px)';
            }, 100);
            setTimeout(() => {
                el.style.transform = 'translateX(0)';
                el.style.borderColor = '';
            }, 300);
        }

        function detectLocation() {
            const btn = document.querySelector('button[onclick="detectLocation()"]');
            const originalHTML = btn.innerHTML;
            
            btn.innerHTML = '<i data-lucide="loader-2" class="w-5 h-5 animate-spin text-indigo-600"></i>';
            lucide.createIcons();
            
            setTimeout(() => {
                state.location = `Indiranagar, Bengaluru`; 
                document.getElementById('location-input').value = state.location;
                btn.innerHTML = '<span class="w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center mr-2"><i data-lucide="check" class="w-4 h-4 text-emerald-600"></i></span> Located';
                btn.classList.add('bg-emerald-50/50');
                lucide.createIcons();
            }, 1500);
        }

        // Enhanced Data
        const facilities = [
             // Human
            { 
                id: 1, 
                type: 'human', 
                name: 'Apollo Speciality', 
                image: 'https://images.unsplash.com/photo-1538108149393-fbbd81895907?auto=format&fit=crop&q=80&w=800',
                specialty: ['general', 'cardio', 'surgery', 'ortho'], 
                address: 'Bannerghatta Road', 
                distance: '1.2 km', 
                bedCount: 14, 
                insurance: ['Star Health', 'HDFC'],
                rating: 4.9
            },
            { 
                id: 2, 
                type: 'human', 
                name: 'Aster CMI Hospital', 
                image: 'https://images.unsplash.com/photo-1512678080530-7760d81faba6?auto=format&fit=crop&q=80&w=800',
                specialty: ['neuro', 'ortho', 'surgery'], 
                address: 'Hebbal, Bengaluru', 
                distance: '8.5 km', 
                bedCount: 20, 
                insurance: ['All Major'],
                rating: 4.8
            },
            { 
                id: 3, 
                type: 'human', 
                name: 'Rainbow Children\'s', 
                image: 'https://images.unsplash.com/photo-1586773860418-d37222d8fce3?auto=format&fit=crop&q=80&w=800',
                specialty: ['paediatrics', 'general'], 
                address: 'Marathahalli', 
                distance: '3.5 km', 
                bedCount: 5, 
                insurance: ['ICICI Lombard'],
                rating: 4.7
            },
            
            // Animal
            { 
                id: 5, 
                type: 'animal', 
                name: 'CESSNA Veterinary', 
                image: 'https://images.unsplash.com/photo-1583337130417-3346a1be7dee?auto=format&fit=crop&q=80&w=800',
                animalType: ['pet'], 
                specialty: ['general', 'surgery', 'derma'], 
                address: 'Domlur', 
                distance: '2.1 km', 
                bedCount: 8, 
                insurance: ['PetSure'],
                rating: 4.8
            },
            { 
                id: 6, 
                type: 'animal', 
                name: 'Wildlife Rescue Ctr', 
                image: 'https://images.unsplash.com/photo-1589156191108-c762ff4b96ab?auto=format&fit=crop&q=80&w=800',
                animalType: ['avian', 'wild'], 
                specialty: ['general', 'internal', 'surgery'], 
                address: 'National Park', 
                distance: '18.4 km', 
                bedCount: 12, 
                insurance: ['Govt'],
                rating: 4.9
            }
        ];

        function generateResults() {
            const loader = document.getElementById('global-loader');
            loader.classList.add('show');

            state.symptoms = document.getElementById('symptoms').value;
            if (state.type === 'human') {
                state.specialty = document.getElementById('human-specialty').value;
            } else {
                state.animalType = document.getElementById('animal-type').value;
                state.specialty = document.getElementById('vet-specialty').value;
            }

            setTimeout(() => {
                loader.classList.remove('show');
                renderFacilities();
                nextStep(4);
            }, 1800);
        }

        function renderFacilities() {
            const filtered = facilities.filter(fac => {
                if (fac.type !== state.type) return false;
                if (state.type === 'human') {
                    return fac.specialty.includes(state.specialty) || fac.specialty.includes('general');
                } else {
                    const typeMatch = fac.animalType.includes(state.animalType);
                    const specMatch = fac.specialty.includes(state.specialty) || fac.specialty.includes('general');
                    return typeMatch && specMatch;
                }
            });

            const container = document.getElementById('results-list');
            container.innerHTML = '';
            
            document.getElementById('result-header-text').innerText = `${filtered.length} Premium Matches Found`;

            if (filtered.length === 0) {
                container.innerHTML = `<div class="p-10 text-center text-slate-400 bg-white/50 border border-white rounded-3xl">No matches found. Try adjusting filters.</div>`;
            } else {
                filtered.forEach((fac, index) => {
                    let bedClass = fac.bedCount < 5 ? 'bg-orange-100 text-orange-600' : 'bg-emerald-100 text-emerald-600';
                    let bedText = fac.bedCount < 5 ? `${fac.bedCount} Beds Left` : 'Available';
                    if (fac.bedCount === 0) { bedClass = 'bg-red-100 text-red-600'; bedText = 'Full'; }

                    const card = document.createElement('div');
                    card.style.animationDelay = `${index * 100}ms`;
                    card.className = 'glass-panel p-1 rounded-[2rem] hover:scale-[1.01] transition-transform duration-300 step-content active';
                    card.innerHTML = `
                        <div class="bg-white rounded-[1.9rem] p-5 flex flex-col md:flex-row gap-6">
                            <div class="w-full md:w-48 h-48 rounded-2xl overflow-hidden relative shrink-0 shadow-md group">
                                <img src="${fac.image}" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" alt="${fac.name}">
                                <div class="absolute top-3 left-3 bg-white/90 backdrop-blur px-2 py-1 rounded-lg text-xs font-bold shadow-sm flex items-center">
                                    <i data-lucide="star" class="w-3 h-3 text-yellow-500 fill-current mr-1"></i> ${fac.rating}
                                </div>
                            </div>
                            <div class="flex-grow flex flex-col justify-between py-2">
                                <div>
                                    <div class="flex justify-between items-start mb-2">
                                        <h3 class="text-xl font-bold text-slate-900">${fac.name}</h3>
                                        <span class="${bedClass} px-3 py-1 rounded-lg text-xs font-bold uppercase tracking-wider">${bedText}</span>
                                    </div>
                                    <p class="text-slate-500 text-sm flex items-center mb-4">
                                        <i data-lucide="map-pin" class="w-4 h-4 text-indigo-500 mr-1"></i> ${fac.address} • ${fac.distance}
                                    </p>
                                    <div class="flex flex-wrap gap-2">
                                        ${fac.specialty.slice(0,3).map(s => `<span class="px-3 py-1 bg-slate-100 text-slate-600 text-xs font-bold uppercase rounded-lg">${s}</span>`).join('')}
                                    </div>
                                </div>
                                <div class="flex items-center justify-between mt-6 pt-4 border-t border-slate-100">
                                    <div class="text-xs font-bold text-slate-400">
                                        INSURANCE: <span class="text-slate-700">${fac.insurance[0]}+</span>
                                    </div>
                                    <div class="flex gap-3">
                                        <button onclick="window.open('https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(fac.name + ' ' + fac.address)}')" class="p-3 rounded-xl bg-slate-50 text-slate-400 hover:bg-indigo-50 hover:text-indigo-600 transition-colors">
                                            <i data-lucide="navigation" class="w-5 h-5"></i>
                                        </button>
                                        <button class="px-6 py-2 bg-slate-900 text-white text-sm font-bold rounded-xl hover:bg-indigo-600 transition-colors shadow-lg">
                                            Book Now
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    container.appendChild(card);
                });
            }

            // Home Visit Logic
            const hv = document.getElementById('home-visit-card');
            const hvTitle = document.getElementById('home-visit-title');
            const hvDesc = document.getElementById('home-visit-desc');

            if (state.type === 'human') {
                hv.classList.add('hidden');
            } else {
                hv.classList.remove('hidden');
                hvTitle.innerText = "Vet Home Visit";
                hvDesc.innerText = "Certified veterinarians available for house calls.";
            }

            lucide.createIcons();
        }

        // Modal Logic
        const backdrop = document.getElementById('modal-backdrop');

        function toggleBackdrop(show) {
            if (show) {
                backdrop.classList.remove('hidden');
                setTimeout(() => backdrop.classList.remove('opacity-0'), 10);
            } else {
                backdrop.classList.add('opacity-0');
                setTimeout(() => backdrop.classList.add('hidden'), 500);
            }
        }

        function requestAmbulance() {
            document.getElementById('modal-city').innerText = state.location || 'Bengaluru';
            showModal('ambulance-modal');
        }

        function bookHomeVisit() {
            showModal('home-visit-modal');
        }

        function showModal(id) {
            toggleBackdrop(true);
            const el = document.getElementById(id);
            el.classList.remove('hidden');
            setTimeout(() => {
                el.classList.remove('opacity-0', 'scale-90');
                el.classList.add('scale-100');
            }, 10);
        }

        function closeModal(id) {
            toggleBackdrop(false);
            const el = document.getElementById(id);
            el.classList.remove('scale-100');
            el.classList.add('opacity-0', 'scale-90');
            setTimeout(() => {
                el.classList.add('hidden');
            }, 500);
        }
    </script>
</body>
</html>